<!-- ✅ 完整可直接使用的 Jekyll 博客模板，支持左侧目录吸附顶部 + 暗色代码高亮 -->
<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>{{ page.title }} | {{ site.title }}</title>

    <!-- ✅ 样式：博客整体布局 + 代码高亮 + 目录样式 -->
    <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/syntax.css" | relative_url }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.css">

    <!-- ✅ 脚本：目录生成器 -->
    <script src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        tocbot.init({
          tocSelector: '.js-toc',
          contentSelector: '.js-toc-content',
          headingSelector: 'h1, h2, h3, h4, h5, h6',
          positionFixedSelector: '.js-toc',
          positionFixedClass: 'is-fixed',
          scrollSmooth: true,
          headingsOffset: 80,
          collapseDepth: 6
        });
      });
    </script>

    <style>
      /* ✅ 目录样式固定在左侧全高，颜色与标题一致 */
      .js-toc {
        position: fixed;
        top: 0;
        left: 0;
        width: 220px;
        height: 100vh;
        padding: 1rem;
        background-color: #f6f8fa; /* GitHub header 淡灰蓝 */
        font-size: 14px;
        line-height: 1.6;
        overflow-y: auto;
        border-right: 1px solid #ddd;
        z-index: 100;
      }

      .js-toc li {
        list-style: none;
        margin: 4px 0;
      }

      .toc-link {
        text-decoration: none;
        color: #0366d6;
        display: block;
      }
      .is-active-link {
        font-weight: bold;
        color: #d73a49;
      }

      .page-content {
        margin-left: 240px; /* 留出目录空间 */
      }

      @media (max-width: 768px) {
        .js-toc {
          display: none;
        }
        .page-content {
          margin-left: 0;
        }
      }
    </style>
  </head>

  <body>
    <!-- ✅ 顶部导航栏 -->
    <header class="site-header">
      <div class="wrapper">
        <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title }}</a>
        <nav class="site-nav">
          <a class="page-link" href="{{ "/directory" | relative_url }}">目录</a>
        </nav>
      </div>
    </header>

    <!-- ✅ 主体区域：左目录 + 右正文 -->
    <main class="page-content">
      <!-- 左侧目录容器（脱离 wrapper） -->
      <nav class="js-toc"></nav>

      <!-- 右侧正文内容 -->
      <div class="wrapper js-toc-content">
        {{ content }}
      </div>
    </main>

    <!-- ✅ 页脚 -->
    <footer class="site-footer">
      <div class="wrapper">
        <p><strong>免责声明：</strong>本博客仅供技术研究与学习交流，严禁用于非法用途，违者后果自负！</p>
        <p>{{ site.author }} © {{ site.time | date: "%Y" }}</p>
      </div>
    </footer>
  </body>
</html>
