<!-- ✅ 完整可直接使用的 Jekyll 博客模板，支持左侧目录自动生成 + 暗色代码高亮 -->
<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>{{ page.title }} | {{ site.title }}</title>

    <!-- ✅ 样式：博客整体布局 + 代码高亮 + 目录样式 -->
    <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/syntax.css" | relative_url }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.css">

    <!-- ✅ 脚本：目录生成器 -->
    <script src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        tocbot.init({
          tocSelector: '.js-toc',
          contentSelector: '.js-toc-content',
          headingSelector: 'h1, h2, h3, h4, h5, h6',
          positionFixedSelector: '.js-toc',
          positionFixedClass: 'is-fixed',
          scrollSmooth: true,
          headingsOffset: 80,
          collapseDepth: 6
        });
      });
    </script>

    <style>
      /* ✅ 内联目录样式优化（你也可以放到 main.css） */
      .js-toc {
        position: fixed;
        top: 100px;
        left: 0;
        width: 220px;
        padding-left: 1rem;
        padding-right: 1rem;
        max-height: 80vh;
        overflow-y: auto;
        font-size: 14px;
        line-height: 1.6;
        z-index: 10;
        background: #fff;
      }



      .js-toc li {
        list-style: none;
        margin: 4px 0;
      }

      .toc-link {
        text-decoration: none;
        color: #444;
      }
      .is-active-link {
        font-weight: bold;
        color: #007acc;
      }

      @media (max-width: 768px) {
        .js-toc {
          display: none;
        }
      }
    </style>
  </head>

  <body>
    <!-- ✅ 顶部导航栏 -->
    <header class="site-header">
      <div class="wrapper">
        <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title }}</a>
        <nav class="site-nav">
          <a class="page-link" href="{{ "/directory" | relative_url }}">目录</a>
        </nav>
      </div>
    </header>

  <main class="page-content" style="display: flex;">
  <!-- ✅ 目录贴边栏：脱离 wrapper，固定左侧 -->
  <nav class="js-toc"></nav>

  <!-- ✅ 内容区域：继续使用 wrapper 居中正文 -->
  <div class="wrapper js-toc-content" style="flex: 1;">
    {{ content }}
  </div>
</main>


    <!-- ✅ 页脚 -->
    <footer class="site-footer">
      <div class="wrapper">
        <p>本博客仅供技术研究与学习交流，严禁用于非法用途，违者后果自负！</p>
        <p>{{ site.author }} © {{ site.time | date: "%Y" }}</p>
      </div>
    </footer>
  </body>
</html>
